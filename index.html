<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แบบประเมินสุขภาพจิตผู้สูงอายุฉบับสั้น (T-GMHA-15)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Sarabun', sans-serif;
            background: linear-gradient(135deg, #4a90e2 0%, #7b68ee 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2196F3, #1976D2);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .instructions {
            line-height: 1.8;
            color: #333;
            margin-bottom: 30px;
        }

        .instructions h3 {
            color: #2196F3;
            margin: 20px 0 10px 0;
        }

        .instructions ul {
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        .scoring-table {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e0e0e0;
        }

        .scoring-table h4 {
            color: #2196F3;
            margin-bottom: 15px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }

        .table th, .table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        .table th {
            background: #2196F3;
            color: white;
        }

        .question-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #2196F3;
        }

        .question {
            font-size: 1.6em;
            margin-bottom: 15px;
            color: #333;
            font-weight: 500;
        }

        .options {
            font-size: 1.3em;
            display: grid;
            gap: 10px;
        }

        .option {
            font-size: 1.3em;
            display: flex;
            align-items: center;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: #2196F3;
            background: #e3f2fd;
        }

        .option input[type="radio"] {
            margin-right: 12px;
            accent-color: #2196F3;
            transform: scale(1.1);
        }

        .btn {
            background: linear-gradient(45deg, #2196F3, #1976D2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(45deg, #2196F3, #1976D2);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .result-card {
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .result-excellent {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border: 2px solid #28a745;
        }

        .result-normal {
            background: linear-gradient(135deg, #cce5ff, #b3d9ff);
            border: 2px solid #2196F3;
        }

        .result-below {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid #ffc107;
        }

        .result-score {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .result-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .result-description {
            font-size: 1.1em;  
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .recommendations {
            text-align: left;
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .recommendations h4 {
            color: #2196F3;
            margin-bottom: 15px;
        }

        .recommendations ul {
            margin-left: 20px;
        }

        .recommendations li {
            margin-bottom: 8px;
        }

        .text-center {
            text-align: center;
        }

        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }

            .table {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header" style="text-align: center; padding: 30px 20px; background: #E3F2FD; border-radius: 12px; margin-bottom: 30px;">
            <h1 style="font-size: 2.2em; margin-bottom: 5px; color: #1565C0;">แบบประเมินสุขภาพจิตผู้สูงอายุฉบับสั้น</h1>
            <p class="subtitle" style="font-size: 1.3em; margin-bottom: 5px; font-weight: bold; color: #1976D2;">(T-GMHA-15)</p>
            <p style="font-size: 1.1em; color: #333;">Thai Geriatric Mental Health Assessment Tool</p>
        </div>


        <!-- หน้า 1: คำชี้แจง -->
        <div id="page1" class="page active">
            <div class="content">
                <div class="instructions">
                    <h2 style="color: #2196F3; margin-bottom: 20px;">คำชี้แจงการทำแบบประเมิน</h2>
                    
                    <h3>วัตถุประสงค์</h3>
                    <p>แบบประเมินสุขภาพจิตผู้สูงอายุฉบับสั้น (T-GMHA-15) มีวัตถุประสงค์เพื่อประเมินสุขภาพจิตของผู้สูงอายุในด้านต่างๆ ครอบคลุมความรู้สึกต่อตนเอง ความสัมพันธ์กับผู้อื่น และการปรับตัวต่อสภาพแวดล้อม</p>

                    <h3>วิธีการตอบ</h3>
                    <p>ในช่วง 1 เดือนที่ผ่านมา ให้ท่านพิจารณาตนเองถึงเหตุการณ์ ความคิด ความรู้สึก แล้วเลือกคำตอบที่ตรงกับความเป็นจริงมากที่สุด โดยมีตัวเลือก 4 ระดับ ดังนี้:</p>
                    <ul>
                        <li><strong style="color: green;">ไม่เลย:</strong> ไม่เคยมีเหตุการณ์ อาการ ความรู้สึก หรือไม่เห็นด้วยกับเรื่องนั้น ๆ</li>
                        <li><strong style="color: orange;">เล็กน้อย:</strong> เคยมีเหตุการณ์ อาการ ความรู้สึกในเรื่องนั้น ๆ เพียงเล็กน้อย หรือเห็นด้วยเพียงเล็กน้อย</li>
                        <li><strong style="color: orangered;">มาก:</strong> เคยมีเหตุการณ์ อาการ ความรู้สึกในเรื่องนั้น ๆ มาก หรือเห็นด้วยกับเรื่องนั้น ๆ มาก</li>
                        <li><strong style="color: red;">มากที่สุด:</strong> เคยมีเหตุการณ์ อาการ ความรู้สึกในเรื่องนั้น ๆ มากที่สุด หรือเห็นด้วยกับเรื่องนั้น ๆ มากที่สุด</li>
                    </ul>

                    <p>โปรดตอบคำถามอย่างตรงไปตรงมา ตามความรู้สึกและประสบการณ์ของท่านในช่วง 1 เดือนที่ผ่านมา</p>

                    <div class="warning-box">
                        <h4>ข้อควรระวัง </h4>
                        <p>ผลการประเมินเป็นเพียงข้อมูลเบื้องต้นเท่านั้น หากท่านมีความกังวลเกี่ยวกับสุขภาพจิต ควรปรึกษาผู้เชี่ยวชาญหรือบุคลากรทางการแพทย์</p>
                    </div>
                </div>

                <div class="text-center">
                    <button class="btn" onclick="nextPage()">เริ่มทำแบบประเมิน</button>
                </div>
            </div>
        </div>


        <!-- หน้า 2: แบบประเมิน -->
        <div id="page2" class="page">
            <div class="content">
                <div class="progress-bar">
                    <div class="progress" id="progressBar" style="width: 0%"></div>
                </div>
                <p style="text-align: center; margin-bottom: 20px; font-size: 1.4em;">คำถามที่ <span id="currentQuestion">1</span> จาก 15</p>

                <form id="assessmentForm">
                    <div id="questionsContainer">
                        <!-- คำถามจะถูกสร้างด้วย JavaScript -->
                    </div>
                    <div id="completedMessage" style="display:none; padding: 20px; background: #e8f5e9; border: 1px solid #43a047; border-radius: 10px; color: #2e7d32; font-weight: bold; text-align: center; margin-top: 20px;">
                        ✅ คุณได้ตอบคำถามครบทั้ง 15 ข้อแล้ว
                    </div>
                </form>

                <div class="text-center">
                    <!-- <button class="btn" onclick="prevPage()">ย้อนกลับ</button> -->
                    <button class="btn" id="submitBtn" onclick="calculateResult()" disabled>ดูผลการประเมิน</button>
                </div>
            </div>
        </div>

        <!-- หน้า 3: ผลการประเมิน -->
        <div id="page3" class="page">
            <div class="content">
                <div id="resultContent">
                    <!-- ผลลัพธ์จะถูกแสดงที่นี่ -->
                </div>

                <div class="text-center">
                    <button class="btn" onclick="resetAssessment()">ทำแบบประเมินใหม่</button>
                    <button class="btn" onclick="window.print()">พิมพ์ผลลัพธ์</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // คำถาม T-GMHA-15
        const questions = [
            {
                id: 1,
                question: "ท่านรู้สึกว่าชีวิตท่านมีความหมาย (มีคุณค่า มีประโยชน์)",
                isReverse: false
            },
            {
                id: 2,
                question: "ท่านรู้สึกว่าชีวิตของท่านมีความสุข",
                isReverse: false
            },
            {
                id: 3,
                question: "ท่านรู้สึกกังวลใจ",
                isReverse: true
            },
            {
                id: 4,
                question: "ท่านพอใจต่อการผูกมิตรหรือเข้ากับบุคคลอื่น",
                isReverse: false
            },
            {
                id: 5,
                question: "ท่านมีสัมพันธภาพที่ดีกับเพื่อนบ้าน",
                isReverse: false
            },
            {
                id: 6,
                question: "ท่านเห็นว่าปัญหาส่วนใหญ่เป็นสิ่งที่ท่านสามารถแก้ไขได้",
                isReverse: false
            },
            {
                id: 7,
                question: "ท่านสามารถทำใจยอมรับได้สำหรับปัญหาที่ยากจะแก้ไข (เมื่อมีปัญหา)",
                isReverse: false
            },
            {
                id: 8,
                question: "ท่านรู้สึกยินดีกับความสำเร็จของคนอื่น",
                isReverse: false
            },
            {
                id: 9,
                question: "ท่านรู้สึกเห็นอกเห็นใจเมื่อผู้อื่นมีทุกข์",
                isReverse: false
            },
            {
                id: 10,
                question: "ท่านพึงพอใจกับความสามารถของตนเอง",
                isReverse: false
            },
            {
                id: 11,
                question: "ท่านรู้สึกภูมิใจในตนเอง",
                isReverse: false
            },
            {
                id: 12,
                question: "ท่านมีเพื่อนหรือคนอื่นๆ ในสังคมคอยช่วยเหลือท่าน เมื่อท่านต้องการ",
                isReverse: false
            },
            {
                id: 13,
                question: "ครอบครัวของท่านมีความรักและผูกพันต่อกัน",
                isReverse: false
            },
            {
                id: 14,
                question: "ถ้าท่านเจ็บป่วยท่านมั่นใจว่าครอบครัวของท่านจะดูแลท่านเป็นอย่างดี",
                isReverse: false
            },
            {
                id: 15,
                question: "สมาชิกของครอบครัวให้ความช่วยเหลือท่าน",
                isReverse: false
            }
        ];

        const options = [
            { text: "ไม่เลย", value: 0 },
            { text: "เล็กน้อย", value: 1 },
            { text: "มาก", value: 2 },
            { text: "มากที่สุด", value: 3 }
        ];

        let currentQuestionIndex = 0;
        let answers = [];

        // แสดงคำถาม
        function displayQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                questionDiv.style.display = index === 0 ? 'block' : 'none';
                questionDiv.id = `question-${index}`;

                let optionsHtml = '';
                options.forEach((option, optionIndex) => {
                    optionsHtml += `
                        <label class="option">
                            <input type="radio" name="question-${index}" value="${option.value}" onchange="selectAnswer(${index}, ${option.value})">
                            <span>${option.text}</span>
                        </label>
                    `;
                });

                questionDiv.innerHTML = `
                    <div class="question">${q.id}. ${q.question}</div>
                    <div class="options">
                        ${optionsHtml}
                    </div>
                `;

                container.appendChild(questionDiv);
            });
        }

        function selectAnswer(questionIndex, value) {
            answers[questionIndex] = value;
            updateProgress();
            
            // อัตโนมัติไปคำถามถัดไป
            if (questionIndex < questions.length - 1) {
                setTimeout(() => {
                    showQuestion(questionIndex + 1);
                }, 500);
            }
        }

        function showQuestion(index) {
            // ซ่อนคำถามปัจจุบัน
            document.getElementById(`question-${currentQuestionIndex}`).style.display = 'none';
            
            // แสดงคำถามใหม่
            currentQuestionIndex = index;
            document.getElementById(`question-${currentQuestionIndex}`).style.display = 'block';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            updateProgress();
        }


        function updateProgress() {
            const progress = ((answers.filter(a => a !== undefined).length) / (questions.length -1)) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // เปิดใช้งานปุ่มส่งเมื่อตอบครบทุกข้อ
            const submitBtn = document.getElementById('submitBtn');
            if (answers.filter(a => a !== undefined).length === questions.length ) {
                submitBtn.disabled = false;
            }
        }

        function nextPage() {
            document.getElementById('page1').classList.remove('active');
            document.getElementById('page2').classList.add('active');
            displayQuestions();
        }

        function prevPage() {
            document.getElementById('page2').classList.remove('active');
            document.getElementById('page1').classList.add('active');
        }

        function calculateResult() {
            let totalScore = 0;

            // คำนวณคะแนนตามเกณฑ์
            answers.forEach((answer, index) => {
                const question = questions[index];
                if (question.isReverse) {
                    // คำถามเชิงลบ (ข้อ 3)
                    totalScore += (3 - answer) + 1;
                } else {
                    // คำถามเชิงบวก
                    totalScore += answer + 1;
                }
            });

            const maxScore = 60;
            let level, levelClass, recommendations, description;

           if (totalScore >= 50) {
              level = "สุขภาพจิตดีกว่าคนทั่วไป";
              levelClass = "result-excellent";
              description = "ท่านมีคะแนนสุขภาพจิตของท่านดีกว่าคนทั่วไป";
              recommendations = [
                  "สามารถส่งเสริมสุขภาพจิตที่ดีให้คงอยู่ด้วยการทำกิจกรรมสร้างความสุข 5 มิติ",
                  "ตามตารางกิจกรรมสร้างสุข 5 มิติรายสัปดาห์"
              ];
          } else if (totalScore >= 43) {
              level = "สุขภาพจิตเท่ากับคนทั่วไป";
              levelClass = "result-normal";
              description = "ท่านมีคะแนนสุขภาพจิตอยู่ในเกณฑ์เท่ากับคนทั่วไป";
              recommendations = [
                  "สามารถส่งเสริมสุขภาพจิตที่ดีให้คงอยู่ด้วยการทำกิจกรรมสร้างความสุข 5 มิติ",
                  "ตามตารางกิจกรรมสร้างสุข 5 มิติรายสัปดาห์"
              ];
          } else {
              level = "สุขภาพจิตต่ำกว่าคนทั่วไป";
              levelClass = "result-below";
              description = "ท่านมีคะแนนสุขภาพจิตอยู่ในกลุ่มต่ำกว่าคนทั่วไป";
              recommendations = [
                  "ให้การช่วยเหลือตนเองเบื้องต้น",
                  "โดยพูดคุยปรึกษากับคนที่ท่านไว้วางใจ",
                  "และทำกิจกรรมสร้างสุข 5 มิติตามตารางกิจกรรมสร้างสุข 5 มิติรายสัปดาห์",
                  "หรือขอรับบริการปรึกษาจากสถานบริการสาธารณสุขใกล้บ้าน"
              ];
          }


            const resultHtml = `
                <div class="result-card ${levelClass}">
                    <div class="result-score">${totalScore} / 60</div>
                    <div class="result-title">${level}</div>
                    <div class="result-description">
                        ${description}
                    </div>
                    
                    <div class="recommendations">
                        <h4>คำแนะนำสำหรับท่าน:</h4>
                        <ul>
                            ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <h4 style="color: #2196F3; margin-bottom: 10px;">หมายเหตุสำคัญ</h4>
                    <p><strong>แบบประเมิน T-GMHA-15</strong> เป็นเครื่องมือคัดกรองเบื้องต้นเท่านั้น ผลการประเมินไม่สามารถใช้แทนการวินิจฉัยทางการแพทย์ได้ 
                    หากท่านมีความกังวลเกี่ยวกับสุขภาพจิตของตนเอง หรือได้คะแนนต่ำ ควรปรึกษาแพทย์หรือผู้เชี่ยวชาญด้านสุขภาพจิตเพื่อการประเมินและการดูแลที่เหมาะสม</p>
                </div>
            `;

            document.getElementById('resultContent').innerHTML = resultHtml;
            document.getElementById('page2').classList.remove('active');
            document.getElementById('page3').classList.add('active');
        }

        function resetAssessment() {
            currentQuestionIndex = 0;
            answers = [];
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('currentQuestion').textContent = '1';
            document.getElementById('submitBtn').disabled = true;
            
            document.getElementById('page3').classList.remove('active');
            document.getElementById('page1').classList.add('active');
            
            // รีเซ็ตฟอร์ม
            document.getElementById('assessmentForm').reset();
        }

        // เริ่มต้นเมื่อโหลดหน้า
        window.onload = function() {
            displayQuestions();
        }
    </script>
</body>
</html>